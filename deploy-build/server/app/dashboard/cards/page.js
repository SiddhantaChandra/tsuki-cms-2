(()=>{var e={};e.id=105,e.ids=[105],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},12603:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var i=t(65239),s=t(48088),a=t(88170),n=t.n(a),o=t(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d={children:["",{children:["dashboard",{children:["cards",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,56280)),"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\cards\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,27577)),"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\layout.js"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,32648)),"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\cards\\page.js"],u={require:t,loadChunk:()=>Promise.resolve()},x=new i.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/dashboard/cards/page",pathname:"/dashboard/cards",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},12879:(e,r,t)=>{"use strict";t.d(r,{A:()=>b});var i=t(43210),s=t(49384),a=t(99282),n=t(13555),o=t(45258),l=t(84754),d=t(23428),c=t(60687);let u=(0,d.A)((0,c.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var x=t(4144),h=t(82816);function m(e){return(0,h.Ay)("MuiAvatar",e)}(0,x.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var p=t(34414);let A=e=>{let{classes:r,variant:t,colorDefault:i}=e;return(0,a.A)({root:["root",t,i&&"colorDefault"],img:["img"],fallback:["fallback"]},m,r)},g=(0,n.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r[t.variant],t.colorDefault&&r.colorDefault]}})((0,o.A)(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),j=(0,n.Ay)("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),v=(0,n.Ay)(u,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"}),b=i.forwardRef(function(e,r){let t=(0,l.b)({props:e,name:"MuiAvatar"}),{alt:a,children:n,className:o,component:d="div",slots:u={},slotProps:x={},imgProps:h,sizes:m,src:b,srcSet:f,variant:y="circular",...C}=t,w=null,k={...t,component:d,variant:y},S=function({crossOrigin:e,referrerPolicy:r,src:t,srcSet:s}){let[a,n]=i.useState(!1);return i.useEffect(()=>{if(!t&&!s)return;n(!1);let i=!0,a=new Image;return a.onload=()=>{i&&n("loaded")},a.onerror=()=>{i&&n("error")},a.crossOrigin=e,a.referrerPolicy=r,a.src=t,s&&(a.srcset=s),()=>{i=!1}},[e,r,t,s]),a}({...h,..."function"==typeof x.img?x.img(k):x.img,src:b,srcSet:f}),M=b||f,P=M&&"error"!==S;k.colorDefault=!P,delete k.ownerState;let R=A(k),[z,_]=(0,p.A)("root",{ref:r,className:(0,s.A)(R.root,o),elementType:g,externalForwardedProps:{slots:u,slotProps:x,component:d,...C},ownerState:k}),[I,D]=(0,p.A)("img",{className:R.img,elementType:j,externalForwardedProps:{slots:u,slotProps:{img:{...h,...x.img}}},additionalProps:{alt:a,src:b,srcSet:f,sizes:m},ownerState:k}),[E,F]=(0,p.A)("fallback",{className:R.fallback,elementType:v,externalForwardedProps:{slots:u,slotProps:x},shouldForwardComponentProp:!0,ownerState:k});return w=P?(0,c.jsx)(I,{...D}):n||0===n?n:M&&a?a[0]:(0,c.jsx)(E,{...F}),(0,c.jsx)(z,{..._,children:w})})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},48566:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>eW});var i=t(60687),s=t(43210),a=t(21360),n=t(89431),o=t(68887),l=t(87088),d=t(51067),c=t(25685),u=t(88931),x=t(16184),h=t(16393),m=t(51711),p=t(83685),A=t(58534),g=t(5294),j=t(91176),v=t(33795),b=t(18652),f=t(70604),y=t(76533),C=t(41434),w=t(49205),k=t(57538),S=t(24886),M=t(64622),P=t(23789),R=t(52260),z=t(41629),_=t(47651),I=t(21771),D=t(59985),E=t(85814),F=t.n(E),W=t(2420),q=t(80986),N=t(76897),X=t(69300),$=t(49384),T=t(99282),O=t(13555),B=t(84754),G=t(4144),H=t(82816);function U(e){return(0,H.Ay)("MuiCardMedia",e)}(0,G.A)("MuiCardMedia",["root","media","img"]);let V=e=>{let{classes:r,isMediaComponent:t,isImageComponent:i}=e;return(0,T.A)({root:["root",t&&"media",i&&"img"]},U,r)},L=(0,O.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e,{isMediaComponent:i,isImageComponent:s}=t;return[r.root,i&&r.media,s&&r.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),K=["video","audio","picture","iframe","img"],Y=["picture","img"],J=s.forwardRef(function(e,r){let t=(0,B.b)({props:e,name:"MuiCardMedia"}),{children:s,className:a,component:n="div",image:o,src:l,style:d,...c}=t,u=K.includes(n),x=!u&&o?{backgroundImage:`url("${o}")`,...d}:d,h={...t,component:n,isMediaComponent:u,isImageComponent:Y.includes(n)},m=V(h);return(0,i.jsx)(L,{className:(0,$.A)(m.root,a),as:n,role:!u&&o?"img":void 0,ref:r,style:x,ownerState:h,src:u?o||l:void 0,...c,children:s})});var Q=t(86862),Z=t(98577),ee=t(86562),er=t(30076),et=t(72132),ei=t(91433),es=t(87688),ea=t(12879),en=t(18811),eo=t(73766),el=t(37204),ed=t(24296),ec=t(90764),eu=t(97887),ex=t(83487),eh=t(72318),em=t(27674),ep=t(66803);t(30474);var eA=t(46380),eg=t(43323),ej=t(23428);let ev=(0,ej.A)((0,i.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");var eb=t(75396);let ef=(0,ej.A)((0,i.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy");var ey=t(72919),eC=t(26001),ew=t(88920);let ek=(0,eC.P)(q.A),eS=(0,eC.P)(N.A);function eM({cards:e,onCardDeleted:r,viewMode:t="table"}){let n=(0,W.U)(),o=(0,a.A)(),[h,m]=(0,s.useState)(!1),[A,g]=(0,s.useState)(null),[v,b]=(0,s.useState)(!1),[f,k]=(0,s.useState)(!1),[S,M]=(0,s.useState)(null),[P,R]=(0,s.useState)(null),[z,I]=(0,s.useState)(null),[D,E]=(0,s.useState)(null);if(!e||0===e.length)return(0,i.jsxs)(u.A,{sx:{textAlign:"center",my:8,p:4,backgroundColor:(0,X.X4)(o.palette.primary.main,.05),borderRadius:2,border:`2px dashed ${(0,X.X4)(o.palette.primary.main,.3)}`},children:[(0,i.jsx)(l.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No cards found"}),(0,i.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Start by adding your first card to the collection"}),(0,i.jsx)(x.A,{component:F(),href:"/dashboard/cards/new",variant:"contained",startIcon:(0,i.jsx)(ey.A,{}),children:"Add First Card"})]});let q=(e,r)=>{R(e.currentTarget),I(r)},$=()=>{R(null),I(null)},T=e=>{g(e),m(!0),M(null),k(!1),$()},O=()=>{m(!1),g(null),M(null)},B=async()=>{if(A){b(!0),M(null);try{if(!f){if(A.image_urls&&A.image_urls.length>0)for(let e of A.image_urls)try{let r=e.match(/\/storage\/v1\/object\/public\/cardimages\/(.*)/);if(r&&r[1]){let e=r[1];await n.storage.from("cardimages").remove([e])}}catch(e){console.error("Error processing image deletion:",e)}if(A.thumbnail_url)try{let e=A.thumbnail_url.match(/\/storage\/v1\/object\/public\/cardimages\/(.*)/);if(e&&e[1]){let r=e[1];await n.storage.from("cardimages").remove([r])}}catch(e){console.error("Error processing thumbnail deletion:",e)}}let{error:e}=await n.from("cards").delete().eq("id",A.id);if(e)throw e;r&&r(A.id),m(!1),g(null)}catch(e){console.error("Error deleting card:",e),M(e)}finally{b(!1)}}},G=e=>null==e?"N/A":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:2}).format(e);return(0,i.jsxs)(i.Fragment,{children:["grid"===t?(0,i.jsx)(()=>(0,i.jsx)(w.A,{container:!0,spacing:3,children:(0,i.jsx)(ew.N,{children:e.map((e,r)=>(0,i.jsx)(w.A,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,i.jsxs)(ek,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{duration:.3,delay:.05*r},whileHover:{y:-8},onMouseEnter:()=>E(e.id),onMouseLeave:()=>E(null),sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",overflow:"visible",cursor:"pointer",transition:"all 0.3s ease",boxShadow:D===e.id?8:2,"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:1,background:`linear-gradient(135deg, ${(0,X.X4)(o.palette.primary.main,0)} 0%, ${(0,X.X4)(o.palette.primary.main,.1)} 100%)`,opacity:+(D===e.id),transition:"opacity 0.3s ease",pointerEvents:"none"}},children:[(0,i.jsxs)(u.A,{sx:{position:"relative",paddingTop:"133.33%"},children:[e.thumbnail_url||e.image_urls&&e.image_urls[0]?(0,i.jsx)(J,{component:"img",image:e.thumbnail_url||e.image_urls[0],alt:e.name,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}):(0,i.jsx)(u.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"grey.200"},children:(0,i.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"No Image"})}),(0,i.jsx)(y.A,{label:G(e.price),size:"small",sx:{position:"absolute",top:8,right:8,backgroundColor:(0,X.X4)(o.palette.background.paper,.9),backdropFilter:"blur(8px)",fontWeight:"bold"}})]}),(0,i.jsxs)(Q.A,{sx:{flexGrow:1,pb:1},children:[(0,i.jsx)(l.A,{variant:"subtitle1",component:"h3",gutterBottom:!0,sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name}),(0,i.jsxs)(c.A,{direction:"row",spacing:1,sx:{mb:1},children:[e.categories?.name&&(0,i.jsx)(y.A,{label:e.categories.name,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}}),e.sets?.name&&(0,i.jsx)(y.A,{label:e.sets.name,size:"small",sx:{fontSize:"0.75rem",backgroundColor:(0,X.X4)(o.palette.secondary.main,.1)}})]})]}),(0,i.jsxs)(u.A,{sx:{p:1,pt:0,display:"flex",gap:1},children:[(0,i.jsx)(x.A,{component:F(),href:`/dashboard/cards/${e.id}/edit`,size:"small",fullWidth:!0,variant:"outlined",startIcon:(0,i.jsx)(eA.A,{}),children:"Edit"}),(0,i.jsx)(p.A,{size:"small",onClick:r=>q(r,e),sx:{border:`1px solid ${(0,X.X4)(o.palette.divider,.3)}`,borderRadius:1},children:(0,i.jsx)(ev,{fontSize:"small"})})]})]})},e.id))})}),{}):(0,i.jsx)(()=>(0,i.jsx)(Z.A,{component:d.A,elevation:0,sx:{borderRadius:2,border:`1px solid ${(0,X.X4)(o.palette.divider,.1)}`,overflow:"hidden"},children:(0,i.jsxs)(ee.A,{sx:{minWidth:650},"aria-label":"cards table",children:[(0,i.jsx)(er.A,{children:(0,i.jsxs)(N.A,{sx:{backgroundColor:(0,X.X4)(o.palette.primary.main,.05)},children:[(0,i.jsx)(et.A,{sx:{width:"80px",fontWeight:600},children:"Image"}),(0,i.jsx)(et.A,{sx:{fontWeight:600},children:"Name"}),(0,i.jsx)(et.A,{sx:{fontWeight:600},children:"Category"}),(0,i.jsx)(et.A,{sx:{fontWeight:600},children:"Set/Subset"}),(0,i.jsx)(et.A,{align:"right",sx:{fontWeight:600},children:"Price"}),(0,i.jsx)(et.A,{align:"center",sx:{width:"120px",fontWeight:600},children:"Actions"})]})}),(0,i.jsx)(ei.A,{children:(0,i.jsx)(ew.N,{children:e.map((e,r)=>{let t=e.thumbnail_url;return!t&&e.image_urls&&e.image_urls.length>0&&(t=e.image_urls[0]),(0,i.jsxs)(eS,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2,delay:.05*r},whileHover:{backgroundColor:(0,X.X4)(o.palette.primary.main,.02)},sx:{"&:last-child td, &:last-child th":{border:0},cursor:"pointer",transition:"all 0.2s ease"},children:[(0,i.jsx)(et.A,{component:"th",scope:"row",children:(0,i.jsx)(u.A,{sx:{position:"relative",width:60,height:80},children:t?(0,i.jsx)(es.A,{in:!0,timeout:300,children:(0,i.jsx)(ea.A,{variant:"rounded",src:t,sx:{width:60,height:80,boxShadow:2,transition:"transform 0.2s ease","&:hover":{transform:"scale(1.05)"}}})}):(0,i.jsx)(ea.A,{variant:"rounded",sx:{width:60,height:80,backgroundColor:"grey.200"},children:(0,i.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"No Image"})})})}),(0,i.jsx)(et.A,{children:(0,i.jsx)(l.A,{variant:"body1",sx:{fontWeight:500},children:e.name})}),(0,i.jsx)(et.A,{children:e.categories?.name&&(0,i.jsx)(y.A,{label:e.categories.name,size:"small",variant:"outlined",sx:{borderColor:(0,X.X4)(o.palette.primary.main,.3),color:o.palette.primary.main}})}),(0,i.jsx)(et.A,{children:(0,i.jsxs)(c.A,{direction:"column",spacing:.5,children:[e.sets?.name&&(0,i.jsx)(l.A,{variant:"body2",color:"text.primary",children:e.sets.name}),e.subsets?.name&&(0,i.jsx)(l.A,{variant:"caption",color:"text.secondary",children:e.subsets.name})]})}),(0,i.jsx)(et.A,{align:"right",children:(0,i.jsx)(l.A,{variant:"body1",sx:{fontWeight:600,color:o.palette.success.main},children:G(e.price)})}),(0,i.jsx)(et.A,{align:"center",children:(0,i.jsxs)(c.A,{direction:"row",spacing:1,justifyContent:"center",children:[(0,i.jsx)(en.A,{title:"Edit",children:(0,i.jsx)(p.A,{component:F(),href:`/dashboard/cards/${e.id}/edit`,size:"small",sx:{color:o.palette.primary.main,"&:hover":{backgroundColor:(0,X.X4)(o.palette.primary.main,.1)}},children:(0,i.jsx)(eA.A,{fontSize:"small"})})}),(0,i.jsx)(en.A,{title:"More Options",children:(0,i.jsx)(p.A,{size:"small",onClick:r=>q(r,e),sx:{"&:hover":{backgroundColor:(0,X.X4)(o.palette.text.primary,.1)}},children:(0,i.jsx)(ev,{fontSize:"small"})})})]})})]},e.id)})})})]})}),{}),(0,i.jsxs)(eo.A,{anchorEl:P,open:!!P,onClose:$,PaperProps:{elevation:3,sx:{minWidth:180,"& .MuiMenuItem-root":{px:2,py:1,borderRadius:1,mx:.5,my:.25,transition:"all 0.2s ease","&:hover":{backgroundColor:(0,X.X4)(o.palette.primary.main,.1)}}}},children:[(0,i.jsxs)(_.A,{component:F(),href:`/dashboard/cards/${z?.id}/edit`,children:[(0,i.jsx)(eA.A,{fontSize:"small",sx:{mr:1.5}}),"Edit"]}),(0,i.jsxs)(_.A,{onClick:()=>console.log("View",z),children:[(0,i.jsx)(eb.A,{fontSize:"small",sx:{mr:1.5}}),"View Details"]}),(0,i.jsxs)(_.A,{onClick:()=>{z&&(navigator.clipboard.writeText(z.id),$())},children:[(0,i.jsx)(ef,{fontSize:"small",sx:{mr:1.5}}),"Copy ID"]}),(0,i.jsx)(j.A,{sx:{my:.5}}),(0,i.jsxs)(_.A,{onClick:()=>T(z),sx:{color:o.palette.error.main,"&:hover":{backgroundColor:(0,X.X4)(o.palette.error.main,.1)}},children:[(0,i.jsx)(eg.A,{fontSize:"small",sx:{mr:1.5}}),"Delete"]})]}),(0,i.jsxs)(el.A,{open:h,onClose:O,TransitionComponent:es.A,PaperProps:{elevation:8,sx:{borderRadius:2,minWidth:400}},children:[(0,i.jsx)(ed.A,{sx:{pb:1},children:(0,i.jsxs)(c.A,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsx)(ea.A,{sx:{backgroundColor:(0,X.X4)(o.palette.error.main,.1),color:o.palette.error.main},children:(0,i.jsx)(eg.A,{})}),(0,i.jsx)(l.A,{variant:"h6",children:"Confirm Delete"})]})}),(0,i.jsxs)(ec.A,{children:[(0,i.jsxs)(eu.A,{sx:{mb:2},children:["Are you sure you want to delete ",(0,i.jsxs)("strong",{children:['"',A?.name,'"']}),"? This action cannot be undone and will remove all associated images from storage."]}),S&&(0,i.jsx)(C.A,{severity:"error",sx:{mb:2},children:S.message||"Failed to delete card"}),(0,i.jsx)(ex.A,{control:(0,i.jsx)(eh.A,{checked:f,onChange:e=>k(e.target.checked),color:"error"}),label:(0,i.jsx)(l.A,{variant:"body2",color:"error",children:"Force delete (skip image deletion)"})})]}),(0,i.jsxs)(em.A,{sx:{px:3,pb:2},children:[(0,i.jsx)(x.A,{onClick:O,disabled:v,variant:"outlined",children:"Cancel"}),(0,i.jsx)(x.A,{onClick:B,color:"error",disabled:v,variant:"contained",startIcon:v?(0,i.jsx)(ep.A,{size:16}):(0,i.jsx)(eg.A,{}),children:v?"Deleting...":"Delete"})]})]})]})}var eP=t(3297),eR=t(41896),ez=t(68301),e_=t(20029),eI=t(59618),eD=t(31267),eE=t(94035),eF=t(91263);function eW(){let e=(0,W.U)(),r=(0,a.A)(),[t,E]=(0,s.useState)([]),[q,N]=(0,s.useState)(0),[X,$]=(0,s.useState)([]),[T,O]=(0,s.useState)(!0),[B,G]=(0,s.useState)(null),[H,U]=(0,s.useState)({open:!1,message:"",severity:"success"}),[V,L]=(0,s.useState)("table"),[K,Y]=(0,s.useState)(!1),[J,Q]=(0,s.useState)(""),[Z,ee]=(0,s.useState)(1),[er,et]=(0,s.useState)(""),[ei,es]=(0,s.useState)([0,1e4]),[ea,en]=(0,s.useState)("created_at"),[eo,el]=(0,s.useState)("desc"),[ed,ec]=(0,s.useState)(""),eu=(0,s.useCallback)(async()=>{O(!0),G(null);try{let r=e.from("cards").select(`
          id, name, price, thumbnail_url, image_urls, 
          sets (name), subsets (name), categories (id, name)
        `,{count:"exact"});ed&&(r=r.ilike("name",`%${ed}%`)),er&&(r=r.eq("category_id",er)),ei[0]>0&&(r=r.gte("price",ei[0])),ei[1]<1e4&&(r=r.lte("price",ei[1])),r=r.order(ea,{ascending:"asc"===eo});let t=(Z-1)*20;r=r.range(t,t+20-1);let{data:i,error:s,count:a}=await r;s?(G("Failed to load cards: "+s.message),E([])):(E(i||[]),N(a||0))}catch(e){G("Failed to load cards"),E([])}finally{O(!1)}},[e,ed,er,ei,ea,eo,Z]),ex=()=>{Q(""),et(""),es([0,1e4]),en("created_at"),el("desc"),ee(1)},eh=[J,er,ei[0]>0||ei[1]<1e4].filter(Boolean).length,em=Math.ceil(q/20);return(0,i.jsxs)(n.A,{maxWidth:"xl",sx:{py:3},children:[(0,i.jsxs)(o.A,{"aria-label":"breadcrumb",sx:{mb:3},children:[(0,i.jsxs)(F(),{href:"/dashboard",style:{color:r.palette.text.primary,textDecoration:"none",display:"flex",alignItems:"center"},children:[(0,i.jsx)(eD.A,{sx:{mr:.5},fontSize:"small"}),"Dashboard"]}),(0,i.jsxs)(l.A,{color:"text.primary",sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(eE.A,{sx:{mr:.5},fontSize:"small"}),"Cards Collection"]})]}),(0,i.jsx)(d.A,{elevation:1,sx:{p:3,mb:3,borderRadius:2},children:(0,i.jsxs)(c.A,{direction:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2,children:[(0,i.jsxs)(u.A,{children:[(0,i.jsx)(l.A,{variant:"h4",component:"h1",fontWeight:"bold",children:"Cards Collection"}),(0,i.jsx)(l.A,{variant:"body1",color:"text.secondary",children:"Manage your trading cards collection"})]}),(0,i.jsx)(x.A,{component:F(),href:"/dashboard/cards/new",variant:"contained",startIcon:(0,i.jsx)(eP.A,{}),sx:{borderRadius:2,px:3,py:1.5,fontWeight:600,boxShadow:2,"&:hover":{transform:"translateY(-1px)",boxShadow:4},transition:"all 0.2s ease"},children:"Add New Card"})]})}),(0,i.jsx)(d.A,{elevation:0,sx:{mb:3,p:2,borderRadius:2,border:`1px solid ${r.palette.divider}`},children:(0,i.jsxs)(c.A,{direction:{xs:"column",md:"row"},spacing:2,alignItems:"center",children:[(0,i.jsx)(h.A,{placeholder:"Search cards...",value:J,onChange:e=>Q(e.target.value),InputProps:{startAdornment:(0,i.jsx)(m.A,{position:"start",children:(0,i.jsx)(eR.A,{})}),endAdornment:J&&(0,i.jsx)(m.A,{position:"end",children:(0,i.jsx)(p.A,{size:"small",onClick:()=>Q(""),children:(0,i.jsx)(eF.A,{fontSize:"small"})})})},sx:{flexGrow:1,"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,i.jsxs)(c.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,i.jsx)(A.A,{badgeContent:eh,color:"primary",children:(0,i.jsx)(x.A,{variant:"outlined",startIcon:(0,i.jsx)(eI.A,{}),onClick:()=>Y(!0),sx:{borderRadius:2},children:"Filters"})}),eh>0&&(0,i.jsx)(g.A,{in:!0,children:(0,i.jsx)(x.A,{size:"small",onClick:ex,sx:{borderRadius:2},children:"Clear All"})}),(0,i.jsx)(j.A,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),(0,i.jsxs)(v.A,{value:V,exclusive:!0,onChange:(e,r)=>r&&L(r),"aria-label":"view mode",size:"small",children:[(0,i.jsx)(b.A,{value:"table","aria-label":"table view",children:(0,i.jsx)(ez.A,{})}),(0,i.jsx)(b.A,{value:"grid","aria-label":"grid view",children:(0,i.jsx)(e_.A,{})})]})]})]})}),eh>0&&(0,i.jsx)(f.A,{direction:"down",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:(0,i.jsx)(u.A,{sx:{mb:2},children:(0,i.jsxs)(c.A,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:[J&&(0,i.jsx)(y.A,{label:`Search: ${J}`,onDelete:()=>Q(""),size:"small"}),er&&(0,i.jsx)(y.A,{label:`Category: ${X.find(e=>e.id===er)?.name}`,onDelete:()=>et(""),size:"small"}),(ei[0]>0||ei[1]<1e4)&&(0,i.jsx)(y.A,{label:`Price: ₹${ei[0]} - ₹${ei[1]}`,onDelete:()=>es([0,1e4]),size:"small"})]})})}),B&&(0,i.jsx)(g.A,{in:!0,children:(0,i.jsx)(C.A,{severity:"error",sx:{mb:2},action:(0,i.jsx)(x.A,{color:"inherit",size:"small",onClick:eu,children:"Retry"}),children:B})}),T?(0,i.jsx)(u.A,{children:"grid"===V?(0,i.jsx)(w.A,{container:!0,spacing:3,children:[...Array(8)].map((e,r)=>(0,i.jsx)(w.A,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,i.jsx)(k.A,{variant:"rectangular",height:320,sx:{borderRadius:2}})},r))}):[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,i.jsx)(k.A,{variant:"rectangular",height:80,sx:{mb:1,borderRadius:1}},r))}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ew.N,{mode:"wait",children:(0,i.jsx)(eC.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:(0,i.jsx)(eM,{cards:t,onCardDeleted:e=>{E(r=>r.filter(r=>r.id!==e)),N(e=>e-1),U({open:!0,message:"Card deleted successfully",severity:"success"})},viewMode:V})},V)}),em>1&&(0,i.jsx)(u.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,i.jsx)(S.A,{count:em,page:Z,onChange:(e,r)=>ee(r),color:"primary",size:"large",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{borderRadius:2}}})})]}),(0,i.jsx)(M.Ay,{anchor:"right",open:K,onClose:()=>Y(!1),PaperProps:{sx:{width:320,p:3,borderRadius:"16px 0 0 16px"}},children:(0,i.jsxs)(u.A,{children:[(0,i.jsxs)(c.A,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,i.jsx)(l.A,{variant:"h6",sx:{fontWeight:600},children:"Filters"}),(0,i.jsx)(p.A,{onClick:()=>Y(!1),children:(0,i.jsx)(eF.A,{})})]}),(0,i.jsxs)(c.A,{spacing:3,children:[(0,i.jsxs)(P.A,{fullWidth:!0,children:[(0,i.jsx)(R.A,{children:"Category"}),(0,i.jsxs)(z.A,{value:er,label:"Category",onChange:e=>{et(e.target.value),ee(1)},children:[(0,i.jsx)(_.A,{value:"",children:(0,i.jsx)("em",{children:"All Categories"})}),X.map(e=>(0,i.jsx)(_.A,{value:e.id,children:e.name},e.id))]})]}),(0,i.jsxs)(u.A,{children:[(0,i.jsxs)(l.A,{gutterBottom:!0,children:["Price Range: ₹",ei[0]," - ₹",ei[1]]}),(0,i.jsx)(I.Ay,{value:ei,onChange:(e,r)=>{es(r),ee(1)},valueLabelDisplay:"auto",min:0,max:1e4,sx:{mt:2}})]}),(0,i.jsxs)(P.A,{fullWidth:!0,children:[(0,i.jsx)(R.A,{children:"Sort By"}),(0,i.jsxs)(z.A,{value:ea,label:"Sort By",onChange:e=>{en(e.target.value),ee(1)},children:[(0,i.jsx)(_.A,{value:"created_at",children:"Date Added"}),(0,i.jsx)(_.A,{value:"name",children:"Name"}),(0,i.jsx)(_.A,{value:"price",children:"Price"})]})]}),(0,i.jsxs)(P.A,{fullWidth:!0,children:[(0,i.jsx)(R.A,{children:"Order"}),(0,i.jsxs)(z.A,{value:eo,label:"Order",onChange:e=>{el(e.target.value),ee(1)},children:[(0,i.jsx)(_.A,{value:"desc",children:"Descending"}),(0,i.jsx)(_.A,{value:"asc",children:"Ascending"})]})]}),(0,i.jsx)(j.A,{}),(0,i.jsxs)(c.A,{direction:"row",spacing:2,children:[(0,i.jsx)(x.A,{fullWidth:!0,variant:"outlined",onClick:ex,children:"Clear All"}),(0,i.jsx)(x.A,{fullWidth:!0,variant:"contained",onClick:()=>Y(!1),children:"Apply"})]})]})]})}),(0,i.jsx)(D.A,{open:H.open,autoHideDuration:6e3,onClose:()=>U({...H,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,i.jsx)(C.A,{onClose:()=>U({...H,open:!1}),severity:H.severity,variant:"filled",elevation:6,children:H.message})})]})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56280:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});let i=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\siddh\\\\Documents\\\\tsuki-cms-2\\\\app\\\\dashboard\\\\cards\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\cards\\page.js","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71529:(e,r,t)=>{Promise.resolve().then(t.bind(t,48566))},72919:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var i=t(23428),s=t(60687);let a=(0,i.A)((0,s.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer")},74075:e=>{"use strict";e.exports=require("zlib")},75396:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var i=t(23428),s=t(60687);let a=(0,i.A)((0,s.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},80986:(e,r,t)=>{"use strict";t.d(r,{A:()=>p});var i=t(43210),s=t(49384),a=t(99282),n=t(13555),o=t(84754),l=t(51067),d=t(4144),c=t(82816);function u(e){return(0,c.Ay)("MuiCard",e)}(0,d.A)("MuiCard",["root"]);var x=t(60687);let h=e=>{let{classes:r}=e;return(0,a.A)({root:["root"]},u,r)},m=(0,n.Ay)(l.A,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),p=i.forwardRef(function(e,r){let t=(0,o.b)({props:e,name:"MuiCard"}),{className:i,raised:a=!1,...n}=t,l={...t,raised:a},d=h(l);return(0,x.jsx)(m,{className:(0,s.A)(d.root,i),elevation:a?8:void 0,ref:r,ownerState:l,...n})})},81257:(e,r,t)=>{Promise.resolve().then(t.bind(t,56280))},81630:e=>{"use strict";e.exports=require("http")},86862:(e,r,t)=>{"use strict";t.d(r,{A:()=>m});var i=t(43210),s=t(49384),a=t(99282),n=t(13555),o=t(84754),l=t(4144),d=t(82816);function c(e){return(0,d.Ay)("MuiCardContent",e)}(0,l.A)("MuiCardContent",["root"]);var u=t(60687);let x=e=>{let{classes:r}=e;return(0,a.A)({root:["root"]},c,r)},h=(0,n.Ay)("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),m=i.forwardRef(function(e,r){let t=(0,o.b)({props:e,name:"MuiCardContent"}),{className:i,component:a="div",...n}=t,l={...t,component:a},d=x(l);return(0,u.jsx)(h,{as:a,className:(0,s.A)(d.root,i),ownerState:l,ref:r,...n})})},87688:(e,r,t)=>{"use strict";t.d(r,{A:()=>u});var i=t(43210),s=t(5526),a=t(76070),n=t(21360),o=t(20077),l=t(6065),d=t(60687);let c={entering:{transform:"none"},entered:{transform:"none"}},u=i.forwardRef(function(e,r){let t=(0,n.A)(),u={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},{addEndListener:x,appear:h=!0,children:m,easing:p,in:A,onEnter:g,onEntered:j,onEntering:v,onExit:b,onExited:f,onExiting:y,style:C,timeout:w=u,TransitionComponent:k=s.Ay,...S}=e,M=i.useRef(null),P=(0,l.A)(M,(0,a.A)(m),r),R=e=>r=>{if(e){let t=M.current;void 0===r?e(t):e(t,r)}},z=R(v),_=R((e,r)=>{(0,o.q)(e);let i=(0,o.c)({style:C,timeout:w,easing:p},{mode:"enter"});e.style.webkitTransition=t.transitions.create("transform",i),e.style.transition=t.transitions.create("transform",i),g&&g(e,r)}),I=R(j),D=R(y),E=R(e=>{let r=(0,o.c)({style:C,timeout:w,easing:p},{mode:"exit"});e.style.webkitTransition=t.transitions.create("transform",r),e.style.transition=t.transitions.create("transform",r),b&&b(e)}),F=R(f);return(0,d.jsx)(k,{appear:h,in:A,nodeRef:M,onEnter:_,onEntered:I,onEntering:z,onExit:E,onExited:F,onExiting:D,addEndListener:e=>{x&&x(M.current,e)},timeout:w,...S,children:(e,{ownerState:r,...t})=>i.cloneElement(m,{style:{transform:"scale(0)",visibility:"exited"!==e||A?void 0:"hidden",...c[e],...C,...m.props.style},ref:P,...t})})})},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[4447,1103,1658,4468,2153,4112,8164,8102,6393,9205,5814,6533,8743,8811,1394,8858,4005,2107,3156],()=>t(12603));module.exports=i})();