(()=>{var e={};e.id=1038,e.ids=[1038],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25284:(e,r,t)=>{Promise.resolve().then(t.bind(t,28855))},27910:e=>{"use strict";e.exports=require("stream")},28855:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>O});var s=t(60687),i=t(43210),o=t.n(i),a=t(16189),n=t(89431),l=t(51067),d=t(25685),c=t(87088),u=t(76533),h=t(16184),x=t(41434),p=t(16393),g=t(51711),m=t(88931),j=t(66803),A=t(45525),b=t(17181),y=t(93010),v=t(83685),f=t(91176),C=t(64622),w=t(23789),k=t(52260),_=t(41629),P=t(47651),q=t(37204),S=t(24296),R=t(90764),B=t(27674),U=t(88920),W=t(26001),I=t(2420),D=t(46380),E=t(43323),z=t(41896),L=t(7854),N=t(3297),F=t(78169),G=t(1588),M=t(79628);function O(){let[e,r]=(0,i.useState)([]),[t,O]=(0,i.useState)([]),[T,$]=(0,i.useState)(!0),[V,Z]=(0,i.useState)(null),[H,K]=(0,i.useState)(null),X=(0,I.U)(),J=(0,a.useRouter)(),[Q,Y]=(0,i.useState)(""),[ee,er]=(0,i.useState)(!1),[et,es]=(0,i.useState)({sortBy:"name_asc"}),[ei,eo]=(0,i.useState)(!1),[ea,en]=(0,i.useState)(null),el=(0,i.useCallback)(async(e=et)=>{$(!0),Z(null);try{let t=X.from("categories").select("id, name, slug");switch(e.sortBy){case"newest":t=t.order("created_at",{ascending:!1});break;case"oldest":t=t.order("created_at",{ascending:!0});break;case"name_asc":default:t=t.order("name",{ascending:!0});break;case"name_desc":t=t.order("name",{ascending:!1})}let{data:s,error:i}=await t;if(i)throw i;r(s||[]),ed(s||[],Q)}catch(e){console.error("Error fetching categories:",e),Z("Failed to load categories. Please try refreshing the page.")}finally{$(!1)}},[X,et,Q]),ed=(e,r)=>{if(!r.trim())return void O(e);O(e.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())))},ec=r=>{Y(r),ed(e,r)},eu=e=>{es(e),el(e),er(!1)},eh=e=>{J.push(`/dashboard/categories/${e}/edit`)},ex=async()=>{if(ea){$(!0),Z(null),K(null);try{let{error:e}=await X.from("categories").delete().match({id:ea.id});if(e)throw e;K(`Category "${ea.name}" deleted successfully.`),el()}catch(e){console.error("Error deleting category:",e),Z(`Failed to delete category: ${e.message}`)}finally{$(!1),eo(!1),en(null)}}},ep=e=>{en(e),eo(!0)};return(0,s.jsxs)(n.A,{maxWidth:"xl",sx:{py:3},children:[(0,s.jsx)(l.A,{elevation:0,sx:{p:3,mb:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:2,border:"1px solid",borderColor:"primary.main"},children:(0,s.jsxs)(d.A,{direction:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2,children:[(0,s.jsxs)(d.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,s.jsx)(c.A,{variant:"h4",component:"h1",fontWeight:"bold",children:"Categories"}),(0,s.jsx)(u.A,{icon:(0,s.jsx)(M.A,{}),label:`Total Categories: ${t.length}`,variant:"filled",sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white",fontWeight:"bold","& .MuiChip-icon":{color:"white"}}})]}),(0,s.jsxs)(d.A,{direction:"row",spacing:1,children:[(0,s.jsx)(h.A,{variant:"contained",startIcon:(0,s.jsx)(G.A,{}),onClick:()=>{if(0===t.length)return;let e=new Blob([[["Name","Slug"],...t.map(e=>[e.name,e.slug||"N/A"])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download="categories.csv",s.click(),window.URL.revokeObjectURL(r)},disabled:0===t.length,sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"Download CSV"}),(0,s.jsx)(h.A,{variant:"contained",startIcon:(0,s.jsx)(F.A,{}),onClick:()=>{el()},sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"Refresh"}),(0,s.jsx)(h.A,{variant:"contained",startIcon:(0,s.jsx)(N.A,{}),onClick:()=>{J.push("/dashboard/categories/new")},sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"Add New Category"})]})]})}),(0,s.jsxs)(U.N,{children:[V&&(0,s.jsx)(W.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,s.jsx)(x.A,{severity:"error",sx:{mb:2},children:V})}),H&&(0,s.jsx)(W.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,s.jsx)(x.A,{severity:"success",sx:{mb:2},children:H})})]}),(0,s.jsx)(l.A,{elevation:1,sx:{p:2,mb:3,borderRadius:2},children:(0,s.jsxs)(d.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsx)(p.A,{fullWidth:!0,placeholder:"Search categories...",value:Q,onChange:e=>ec(e.target.value),InputProps:{startAdornment:(0,s.jsx)(g.A,{position:"start",children:(0,s.jsx)(z.A,{color:"action"})})},sx:{flexGrow:1}}),(0,s.jsx)(h.A,{variant:"outlined",startIcon:(0,s.jsx)(L.A,{}),onClick:()=>er(!0),children:"Filters"})]})}),T?(0,s.jsxs)(m.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200},children:[(0,s.jsx)(j.A,{size:40}),(0,s.jsx)(c.A,{variant:"body1",sx:{ml:2},children:"Loading categories..."})]}):(0,s.jsx)(l.A,{elevation:1,sx:{borderRadius:2,overflow:"hidden"},children:0===t.length?(0,s.jsxs)(m.A,{sx:{p:4,textAlign:"center"},children:[(0,s.jsx)(M.A,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,s.jsx)(c.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No categories found"}),(0,s.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[Q?"Try different search terms or":"Add some categories to get started or"," adjust your filters."]})]}):(0,s.jsx)(A.A,{children:t.map((e,r)=>(0,s.jsxs)(o().Fragment,{children:[(0,s.jsxs)(b.Ay,{sx:{py:2,"&:hover":{backgroundColor:"action.hover"}},children:[(0,s.jsx)(y.A,{primary:(0,s.jsx)(c.A,{variant:"h6",fontWeight:"medium",children:e.name}),secondary:e.slug&&(0,s.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:["Slug: ",e.slug]})}),(0,s.jsxs)(d.A,{direction:"row",spacing:1,children:[(0,s.jsx)(v.A,{color:"primary",onClick:()=>eh(e.id),children:(0,s.jsx)(D.A,{})}),(0,s.jsx)(v.A,{color:"error",onClick:()=>ep(e),children:(0,s.jsx)(E.A,{})})]})]}),r<t.length-1&&(0,s.jsx)(f.A,{})]},e.id))})}),(0,s.jsx)(C.Ay,{anchor:"right",open:ee,onClose:()=>er(!1),children:(0,s.jsxs)(m.A,{sx:{width:300,p:3},children:[(0,s.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Filter Categories"}),(0,s.jsxs)(d.A,{spacing:3,children:[(0,s.jsxs)(w.A,{fullWidth:!0,children:[(0,s.jsx)(k.A,{children:"Sort By"}),(0,s.jsxs)(_.A,{value:et.sortBy,onChange:e=>es({...et,sortBy:e.target.value}),label:"Sort By",children:[(0,s.jsx)(P.A,{value:"name_asc",children:"Name (A-Z)"}),(0,s.jsx)(P.A,{value:"name_desc",children:"Name (Z-A)"}),(0,s.jsx)(P.A,{value:"newest",children:"Newest First"}),(0,s.jsx)(P.A,{value:"oldest",children:"Oldest First"})]})]}),(0,s.jsxs)(d.A,{direction:"row",spacing:2,children:[(0,s.jsx)(h.A,{variant:"outlined",fullWidth:!0,onClick:()=>{es({sortBy:"name_asc"}),eu({sortBy:"name_asc"})},children:"Clear"}),(0,s.jsx)(h.A,{variant:"contained",fullWidth:!0,onClick:()=>eu(et),children:"Apply"})]})]})]})}),(0,s.jsxs)(q.A,{open:ei,onClose:()=>eo(!1),maxWidth:"sm",fullWidth:!0,children:[(0,s.jsx)(S.A,{children:"Confirm Delete"}),(0,s.jsx)(R.A,{children:(0,s.jsxs)(c.A,{children:['Are you sure you want to delete the category "',ea?.name,'"? This might affect existing cards and sets.']})}),(0,s.jsxs)(B.A,{children:[(0,s.jsx)(h.A,{onClick:()=>eo(!1),children:"Cancel"}),(0,s.jsx)(h.A,{onClick:ex,color:"error",variant:"contained",disabled:T,children:T?(0,s.jsx)(j.A,{size:20}):"Delete"})]})]})]})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},46380:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(23428),i=t(60687);let o=(0,s.A)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},50069:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\siddh\\\\Documents\\\\tsuki-cms-2\\\\app\\\\dashboard\\\\categories\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\categories\\page.js","default")},51823:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=t(65239),i=t(48088),o=t(88170),a=t.n(o),n=t(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let d={children:["",{children:["dashboard",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,50069)),"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\categories\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,27577)),"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\layout.js"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,32648)),"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\categories\\page.js"],u={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/dashboard/categories/page",pathname:"/dashboard/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95428:(e,r,t)=>{Promise.resolve().then(t.bind(t,50069))}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,1103,1658,4468,2153,4112,8164,8102,6393,6533,1394,416,3156],()=>t(51823));module.exports=s})();