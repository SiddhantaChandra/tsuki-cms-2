(()=>{var e={};e.id=6990,e.ids=[6990],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},12064:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(23428),i=t(60687);let o=(0,s.A)((0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},15741:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\siddh\\\\Documents\\\\tsuki-cms-2\\\\app\\\\dashboard\\\\accessories\\\\[id]\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\accessories\\[id]\\page.js","default")},17647:(e,r,t)=>{Promise.resolve().then(t.bind(t,81041))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},46380:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(23428),i=t(60687);let o=(0,s.A)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81041:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>B});var s=t(60687),i=t(43210),o=t(16189),a=t(2420),n=t(89431),l=t(88931),d=t(66803),c=t(41434),u=t(16184),m=t(51067),p=t(49205),h=t(99282),x=t(49384),g=t(13555),v=t(84754),y=t(4144),b=t(82816);function A(e){return(0,b.Ay)("MuiImageList",e)}(0,y.A)("MuiImageList",["root","masonry","quilted","standard","woven"]);let f=i.createContext({}),j=e=>{let{classes:r,variant:t}=e;return(0,h.A)({root:["root",t]},A,r)},k=(0,g.Ay)("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r[t.variant]]}})({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch",variants:[{props:{variant:"masonry"},style:{display:"block"}}]}),w=i.forwardRef(function(e,r){let t=(0,v.b)({props:e,name:"MuiImageList"}),{children:o,className:a,cols:n=2,component:l="ul",rowHeight:d="auto",gap:c=4,style:u,variant:m="standard",...p}=t,h=i.useMemo(()=>({rowHeight:d,gap:c,variant:m}),[d,c,m]),g="masonry"===m?{columnCount:n,columnGap:c,...u}:{gridTemplateColumns:`repeat(${n}, 1fr)`,gap:c,...u},y={...t,component:l,gap:c,rowHeight:d,variant:m},b=j(y);return(0,s.jsx)(k,{as:l,className:(0,x.A)(b.root,b[m],a),ref:r,style:g,ownerState:y,...p,children:(0,s.jsx)(f.Provider,{value:h,children:o})})});var C=t(13174);function _(e){return(0,b.Ay)("MuiImageListItem",e)}let q=(0,y.A)("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),I=e=>{let{classes:r,variant:t}=e;return(0,h.A)({root:["root",t],img:["img"]},_,r)},P=(0,g.Ay)("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[{[`& .${q.img}`]:r.img},r.root,r[t.variant]]}})({display:"block",position:"relative",[`& .${q.img}`]:{objectFit:"cover",width:"100%",height:"100%",display:"block"},variants:[{props:{variant:"standard"},style:{display:"flex",flexDirection:"column"}},{props:{variant:"woven"},style:{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}}},{props:{variant:"standard"},style:{[`& .${q.img}`]:{height:"auto",flexGrow:1}}}]}),S=i.forwardRef(function(e,r){let t=(0,v.b)({props:e,name:"MuiImageListItem"}),{children:o,className:a,cols:n=1,component:l="li",rows:d=1,style:c,...u}=t,{rowHeight:m="auto",gap:p,variant:h}=i.useContext(f),g="auto";"woven"===h?g=void 0:"auto"!==m&&(g=m*d+p*(d-1));let y={...t,cols:n,component:l,gap:p,rowHeight:m,rows:d,variant:h},b=I(y);return(0,s.jsx)(P,{as:l,className:(0,x.A)(b.root,b[h],a),ref:r,style:{height:g,gridColumnEnd:"masonry"!==h?`span ${n}`:void 0,gridRowEnd:"masonry"!==h?`span ${d}`:void 0,marginBottom:"masonry"===h?p:void 0,breakInside:"masonry"===h?"avoid":void 0,...c},ownerState:y,...u,children:i.Children.map(o,e=>i.isValidElement(e)?"img"===e.type||(0,C.A)(e,["Image"])?i.cloneElement(e,{className:(0,x.A)(b.img,e.props.className)}):e:null)})});var M=t(87088),R=t(76533),E=t(91176),L=t(12064),D=t(46380),$=t(96926);function B({params:e}){let{id:r}=e;(0,a.U)();let t=(0,o.useRouter)(),{isAdmin:h,isEditor:x}=(0,$.A)(),[g,v]=(0,i.useState)(null),[y,b]=(0,i.useState)(!0),[A,f]=(0,i.useState)(null),[j,k]=(0,i.useState)(null),C=()=>{t.push("/dashboard/accessories")},_=e=>{k(e)};return y?(0,s.jsx)(n.A,{maxWidth:"lg",children:(0,s.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:(0,s.jsx)(d.A,{})})}):A?(0,s.jsxs)(n.A,{maxWidth:"lg",children:[(0,s.jsx)(c.A,{severity:"error",sx:{mt:4},children:A}),(0,s.jsx)(u.A,{variant:"outlined",startIcon:(0,s.jsx)(L.A,{}),onClick:C,sx:{mt:2},children:"Back to Accessories"})]}):g?(0,s.jsxs)(n.A,{maxWidth:"lg",children:[(0,s.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:4,mb:3},children:[(0,s.jsx)(u.A,{variant:"outlined",startIcon:(0,s.jsx)(L.A,{}),onClick:C,children:"Back to Accessories"}),!y&&(h?.()||x?.())&&(0,s.jsx)(u.A,{variant:"contained",color:"primary",startIcon:(0,s.jsx)(D.A,{}),onClick:()=>{t.push(`/dashboard/accessories/${r}/edit`)},children:"Edit Accessory"})]}),(0,s.jsx)(m.A,{elevation:2,sx:{p:3,mb:4},children:(0,s.jsxs)(p.A,{container:!0,spacing:4,children:[(0,s.jsxs)(p.A,{item:!0,xs:12,md:6,children:[(0,s.jsx)(l.A,{sx:{mb:2},children:(0,s.jsx)("img",{src:j||"/images/placeholder.png",alt:g.name,style:{width:"100%",maxHeight:"400px",objectFit:"contain",backgroundColor:"#f5f5f5",borderRadius:"4px"}})}),g.image_urls&&g.image_urls.length>1&&(0,s.jsx)(w,{cols:4,rowHeight:80,sx:{mt:1},children:g.image_urls.map((e,r)=>(0,s.jsx)(S,{onClick:()=>_(e),sx:{cursor:"pointer",border:e===j?"2px solid #2196f3":"none",borderRadius:"4px"},children:(0,s.jsx)("img",{src:e,alt:`${g.name} view ${r+1}`,loading:"lazy",style:{height:"100%",objectFit:"contain",backgroundColor:"#f5f5f5",borderRadius:"2px"}})},r))})]}),(0,s.jsxs)(p.A,{item:!0,xs:12,md:6,children:[(0,s.jsx)(M.A,{variant:"h4",component:"h1",gutterBottom:!0,children:g.name}),(0,s.jsxs)(l.A,{sx:{display:"flex",gap:1,mb:2},children:[(0,s.jsx)(R.A,{label:g.accessory_type||"Other",color:"secondary",variant:"outlined"}),g.categories&&(0,s.jsx)(R.A,{label:g.categories.name,color:"primary",variant:"outlined"})]}),(0,s.jsxs)(M.A,{variant:"h5",component:"p",color:"primary",sx:{mb:2},children:["$",g.price?.toFixed(2)]}),(0,s.jsx)(R.A,{label:g.stock_quantity>0?`In Stock: ${g.stock_quantity}`:"Out of Stock",color:g.stock_quantity>0?"success":"error",sx:{mb:3}}),(0,s.jsx)(E.A,{sx:{my:2}}),(0,s.jsx)(M.A,{variant:"h6",gutterBottom:!0,children:"Description"}),(0,s.jsx)(M.A,{variant:"body1",paragraph:!0,children:g.description||"No description provided."}),(0,s.jsx)(E.A,{sx:{my:2}}),(0,s.jsxs)(l.A,{children:[(0,s.jsxs)(M.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Product ID: ",g.id]}),(0,s.jsxs)(M.A,{variant:"subtitle2",color:"text.secondary",children:["Added: ",new Date(g.created_at).toLocaleDateString()]})]})]})]})})]}):(0,s.jsxs)(n.A,{maxWidth:"lg",children:[(0,s.jsx)(c.A,{severity:"warning",sx:{mt:4},children:"Accessory not found"}),(0,s.jsx)(u.A,{variant:"outlined",startIcon:(0,s.jsx)(L.A,{}),onClick:C,sx:{mt:2},children:"Back to Accessories"})]})}},81630:e=>{"use strict";e.exports=require("http")},87251:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=t(65239),i=t(48088),o=t(88170),a=t.n(o),n=t(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let d={children:["",{children:["dashboard",{children:["accessories",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,15741)),"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\accessories\\[id]\\page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,27577)),"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\layout.js"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,32648)),"C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\siddh\\Documents\\tsuki-cms-2\\app\\dashboard\\accessories\\[id]\\page.js"],u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/dashboard/accessories/[id]/page",pathname:"/dashboard/accessories/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},89623:(e,r,t)=>{Promise.resolve().then(t.bind(t,15741))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96926:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(43210),i=t(2420);async function o(e,r,t){let{data:s,error:i}=await e.from("user_roles").select(`
      role_id,
      roles:role_id (
        role_permissions (
          permission_id,
          permissions:permission_id (
            name
          )
        )
      )
    `).eq("user_id",r);return i?(console.error("Error checking user permission:",i),!1):s.some(e=>e.roles.role_permissions.some(e=>e.permissions.name===t))}function a(){let e=(0,i.U)(),[r,t]=(0,s.useState)(!0),[a,n]=(0,s.useState)(null),[l,d]=(0,s.useState)(null),[c,u]=(0,s.useState)([]),[m,p]=(0,s.useState)(!1),h=(0,s.useCallback)(e=>!!m&&!r&&!!l&&!!c&&0!==c.length&&c.some(r=>r&&r.name===e),[m,r,l,c]),x=(0,s.useCallback)(async t=>{if(!m||r||!l)return!1;try{return await o(e,l,t)}catch(e){return console.error("Error checking permission:",e.message||e),!1}},[m,r,e,l]),g=(0,s.useCallback)(()=>h("admin"),[h]),v=(0,s.useCallback)(()=>h("editor")||h("admin"),[h]),y=(0,s.useCallback)(()=>h("viewer")||h("editor")||h("admin"),[h]);return{userId:l,userRoles:c,loading:r,error:a,initialized:m,checkRole:h,checkPermission:x,isAdmin:g,isEditor:v,isViewer:y}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,1103,1658,4468,2153,4112,8164,9205,6533,3156],()=>t(87251));module.exports=s})();