(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1954],{3004:(e,r,s)=>{"use strict";s.d(r,{ColorModeProvider:()=>n,G:()=>a});var t=s(95155),o=s(12115);let i=(0,o.createContext)({toggleColorMode:()=>{},mode:"dark"});function n(e){let{children:r}=e,[s,n]=(0,o.useState)("dark");(0,o.useEffect)(()=>{let e="dark";try{let r=localStorage.getItem("themeMode");r?e=r:window.matchMedia&&(window.matchMedia("(prefers-color-scheme: light)").matches?e="light":window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"))}catch(e){console.error("Error determining theme mode on client: ",e)}e!==s&&n(e)},[]);let a=(0,o.useMemo)(()=>({toggleColorMode:()=>{n(e=>{let r="light"===e?"dark":"light";try{localStorage.setItem("themeMode",r)}catch(e){console.error("Could not access localStorage: ",e)}return r})},mode:s}),[s]);return(0,t.jsx)(i.Provider,{value:a,children:r})}let a=()=>(0,o.useContext)(i)},5905:(e,r,s)=>{Promise.resolve().then(s.bind(s,45367))},45367:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>O});var t=s(95155),o=s(12115),i=s(54581),n=s(22548),a=s(18987),l=s(35695),c=s(55954),d=s(71169),h=s(30529),x=s(3127),m=s(700),u=s(44389),p=s(98387),j=s(77934),A=s(3004);function g(e){let{handleDrawerToggle:r,userEmail:s}=e,{mode:o,toggleColorMode:i}=(0,A.G)();return(0,t.jsx)(d.A,{position:"fixed",sx:{width:{sm:"calc(100% - ".concat(240,"px)")},ml:{sm:"".concat(240,"px")}},children:(0,t.jsxs)(h.A,{children:[(0,t.jsx)(x.A,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:r,sx:{mr:2,display:{sm:"none"}},children:(0,t.jsx)(u.A,{})}),(0,t.jsx)(m.A,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:"Tsuki CMS"}),s&&(0,t.jsx)(m.A,{variant:"body2",sx:{mr:1.5},children:s}),(0,t.jsx)(x.A,{sx:{ml:1},onClick:i,color:"inherit",children:"dark"===o?(0,t.jsx)(j.A,{}):(0,t.jsx)(p.A,{})})]})})}var b=s(74964),f=s(63148),k=s(65528),y=s(22376),w=s(39489),v=s(85222),C=s(99125),M=s(88806),I=s(25031),S=s(72093),z=s(37429),E=s(19983),J=s(15808),N=s(94235);function D(e){let{handleLogout:r}=e,s=[[{text:"Dashboard",icon:(0,t.jsx)(C.A,{}),href:"/dashboard"}],[{text:"Cards",icon:(0,t.jsx)(S.A,{}),href:"/dashboard/cards"},{text:"Slabs",icon:(0,t.jsx)(z.A,{}),href:"/dashboard/slabs"},{text:"Accessories",icon:(0,t.jsx)(E.A,{}),href:"/dashboard/accessories"}],[{text:"Categories",icon:(0,t.jsx)(M.A,{}),href:"/dashboard/categories"},{text:"Sets",icon:(0,t.jsx)(I.A,{}),href:"/dashboard/sets"},{text:"Subsets",icon:(0,t.jsx)(N.A,{}),href:"/dashboard/subsets"}]];return(0,t.jsxs)("div",{children:[(0,t.jsx)(h.A,{children:(0,t.jsx)(m.A,{variant:"h6",noWrap:!0,component:"div",children:"Tsuki CMS"})}),(0,t.jsx)(b.A,{}),s.map((e,r)=>(0,t.jsxs)(o.Fragment,{children:[(0,t.jsx)(f.A,{children:e.map(e=>(0,t.jsx)(k.Ay,{disablePadding:!0,children:(0,t.jsxs)(y.A,{component:"a",href:e.href,children:[(0,t.jsx)(w.A,{children:e.icon}),(0,t.jsx)(v.A,{primary:e.text})]})},e.text))}),r<s.length-1&&(0,t.jsx)(b.A,{})]},"group-".concat(r))),(0,t.jsxs)(f.A,{sx:{marginTop:"auto"},children:[(0,t.jsx)(b.A,{}),(0,t.jsx)(k.Ay,{disablePadding:!0,children:(0,t.jsxs)(y.A,{onClick:r,children:[(0,t.jsx)(w.A,{children:(0,t.jsx)(J.A,{})}),(0,t.jsx)(v.A,{primary:"Sign Out"})]})})]})]})}function O(e){let{children:r}=e,[s,d]=o.useState(!1),h=(0,l.useRouter)(),x=(0,c.U)(),[m,u]=o.useState(null);o.useEffect(()=>{(async()=>{let{data:{user:e},error:r}=await x.auth.getUser();if(r)return console.error("Error fetching user in layout:",r);(null==e?void 0:e.email)&&u(e.email)})()},[x,h]);let p=()=>{d(!s)},j=async()=>{await x.auth.signOut(),h.push("/login")};return(0,t.jsxs)(i.A,{sx:{display:"flex",height:"100vh"},children:[(0,t.jsx)(n.Ay,{}),(0,t.jsx)(g,{handleDrawerToggle:p,userEmail:m}),(0,t.jsxs)(i.A,{component:"nav",sx:{width:{sm:240},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[(0,t.jsx)(a.Ay,{variant:"temporary",open:s,onClose:p,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240,height:"100%",display:"flex",flexDirection:"column"}},children:(0,t.jsx)(D,{handleLogout:j})}),(0,t.jsx)(a.Ay,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240,height:"100%",display:"flex",flexDirection:"column"}},open:!0,children:(0,t.jsx)(D,{handleLogout:j})})]}),(0,t.jsx)(i.A,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(240,"px)")},marginTop:"64px"},children:r})]})}},55954:(e,r,s)=>{"use strict";s.d(r,{U:()=>o});var t=s(81935);function o(){return(0,t.createBrowserClient)("https://zyqebttgsbkjarthknns.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp5cWVidHRnc2JramFydGhrbm5zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwNzkxNzcsImV4cCI6MjA2MzY1NTE3N30.o3K5QGPT-BL6y9iBnn4oaxkrD-Oed6mW3TALFk4vqJ8")}}},e=>{var r=r=>e(e.s=r);e.O(0,[1935,4127,2842,9295,8987,9788,5821,8441,1684,7358],()=>r(5905)),_N_E=e.O()}]);